---
import { Github, Linkedin, Moon, Sun, Menu } from '@lucide/astro'
import { Image } from 'astro:assets'

import MrCat from '../assets/mrcat.jpeg'
---

<header class="backdrop-blur-md fixed w-full z-30 top-0 left-0" id="main-header">
  <section class="container px-2 lg:max-w-[1114px] flex flex-wrap items-center justify-between mx-auto py-4">
    <a class="flex text-gray-black dark:text-white-color/80 gap-2 items-center self-center text-xl font-black whitespace-nowrap hover:underline" href="/">
      <Image src={MrCat} alt="Logo" class="w-10 h-10 rounded-full object-cover" draggable="false"/>
      Franki
    </a>
    <div class="hidden md:flex md:order-2 [&>a]:px-2 [&>a]:py-1 md:items-center">
      <a href="https://www.linkedin.com/in/franki-jhan-carlos-narvaez-munoz-a04bb0319/" target="_blank" aria-label="Visit my LinkedId profile">
        <Linkedin size={20} class='text-gray-black dark:text-white-color hover:scale-110 transition-all duration-300' />
      </a>
      <a href="https://github.com/FrankiNarvaez" target="_blank"  aria-label="Visit my Github profile">
        <Github size={20} class='text-gray-black dark:text-white-color hover:scale-110 transition-all duration-300' />
      </a>
      <button class="rounded-md hover:scale-110 transition-all duration-300 bg-gray-400/40 p-1 ml-2 theme-btn">
        <Moon size={20} class='text-gray-black dark:text-white-color block dark:hidden'/>
        <Sun size={20} class='text-gray-black dark:text-white-color hidden dark:block'/>
      </button>
    </div>
    <div class="flex items-center md:hidden">
      <button class="p-1 rounded-md bg-gray-400/40 theme-btn">
        <Moon size={20} class='text-gray-black dark:text-white-color block dark:hidden'/>
        <Sun size={20} class='text-gray-black dark:text-white-color hidden dark:block'/>
      </button>
      <button class="p-2 text-sm rounded-lg" title="Menu nav">
        <Menu size={20} class='text-gray-black dark:text-white-color' />
      </button>
    </div>
    <nav class="items-center justify-between w-full md:flex md:w-auto md:order-1 transition-all duration-500 hidden" id="menu">
      <ul class="flex flex-col items-center font-bold text-lg [&>li]:px-4 [&>li]:py-2 md:flex-row md:mt-0 md:border-0 text-gray-black dark:text-white-color dark:font-normal">
        <li class="hover:bg-main-color/10 rounded-xl transition-all duration-300 hover:text-main-color"><a href="/#Home">Home</a></li>
        <li class="hover:bg-main-color/10 rounded-xl transition-all duration-300 hover:text-main-color"><a href="/projects">Projects</a></li>
        <li class="hover:bg-main-color/10 rounded-xl transition-all duration-300 hover:text-main-color"><a href="/#About">About me</a></li>
        <li class="hover:bg-main-color/10 rounded-xl transition-all duration-300 hover:text-main-color"><a href="/#Contact">Contact</a></li>
      </ul>
      <div class="flex justify-center [&>a]:px-4 [&>a]:py-2 md:hidden">
        <a href="https://www.linkedin.com/in/franki-jhan-carlos-narvaez-munoz-a04bb0319/" target="_blank">
          <Linkedin size={20} class='text-gray-black dark:text-white-color hover:scale-110 transition-all duration-300' />
        </a>
        <a href="https://github.com/FrankiNarvaez" target="_blank">
          <Github size={20} class='text-gray-black dark:text-white-color hover:scale-110 transition-all duration-300' />
        </a>
      </div>
    </nav>
  </section>
</header>

<script>
  // Modo oscuro
  const $themeButtons = document.querySelectorAll('.theme-btn');

  $themeButtons.forEach((button) => {
    button.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark')
      if (document.documentElement.classList.contains('dark')) {
        localStorage.setItem('theme', 'dark');
      } else {
        localStorage.setItem('theme', 'light');
      }
    });
  });

  // Configuración inicial del tema según el localStorage o el sistema
  const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

  if (currentTheme === 'dark') {
    document.documentElement.classList.add('dark');
  } else {
    document.documentElement.classList.remove('dark');
  }

  // Lógica para el menú, ya existente
  const $menuButton = document.querySelector('button[title="Menu nav"]');
  const $menuNav = document.querySelector('#menu');
  
  if ($menuButton && $menuNav) {
    $menuButton.addEventListener('click', () => {
      $menuNav.classList.toggle('hidden');
    });
  }
</script>
